import{_ as i,c as a,o as t,ae as n}from"./chunks/framework.DK_uz7nx.js";const E=JSON.parse('{"title":"12-Web 字体优化专题","description":"","frontmatter":{},"headers":[],"relativePath":"3.页面渲染与性能优化/06-Web字体优化专题.md","filePath":"3.页面渲染与性能优化/06-Web字体优化专题.md"}'),l={name:"3.页面渲染与性能优化/06-Web字体优化专题.md"};function h(e,s,p,k,r,o){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="_12-web-字体优化专题" tabindex="-1">12-Web 字体优化专题 <a class="header-anchor" href="#_12-web-字体优化专题" aria-label="Permalink to &quot;12-Web 字体优化专题&quot;">​</a></h1><p>自定义 Web 字体是提升网站设计感和品牌辨识度的重要手段，但它们也是常见的性能瓶颈。字体文件通常体积较大，且属于高优先级资源，它们的加载策略直接影响到 <strong>FCP (首次内容绘制)</strong>、<strong>LCP (最大内容绘制)</strong> 和 <strong>CLS (累积布局偏移)</strong> 等核心性能指标。</p><h2 id="_1-字体加载引发的问题" tabindex="-1">1. 字体加载引发的问题 <a class="header-anchor" href="#_1-字体加载引发的问题" aria-label="Permalink to &quot;1. 字体加载引发的问题&quot;">​</a></h2><p>浏览器在渲染文本时，如果发现指定的 <code>@font-face</code> 字体尚未下载完成，就会面临一个两难的抉择，从而导致两种不佳的用户体验：</p><h3 id="a-foit-flash-of-invisible-text-不可见文本闪烁" tabindex="-1">a. FOIT (Flash of Invisible Text) - 不可见文本闪烁 <a class="header-anchor" href="#a-foit-flash-of-invisible-text-不可见文本闪烁" aria-label="Permalink to &quot;a. FOIT (Flash of Invisible Text) - 不可见文本闪烁&quot;">​</a></h3><ul><li><strong>现象</strong>：浏览器会<strong>等待</strong>字体文件下载完成，在此期间，使用该字体的文本将是<strong>完全不可见的</strong>。这会导致用户在一段时间内（通常最多 3 秒）看不到任何文字内容，严重影响 LCP。</li><li><strong>原因</strong>：这是许多浏览器的默认行为，旨在避免显示未样式化的文本。</li></ul><h3 id="b-fout-flash-of-unstyled-text-无样式文本闪烁" tabindex="-1">b. FOUT (Flash of Unstyled Text) - 无样式文本闪烁 <a class="header-anchor" href="#b-fout-flash-of-unstyled-text-无样式文本闪烁" aria-label="Permalink to &quot;b. FOUT (Flash of Unstyled Text) - 无样式文本闪烁&quot;">​</a></h3><ul><li><strong>现象</strong>：浏览器会立即使用一个<strong>备用字体</strong>（如系统默认字体）来显示文本。当自定义字体下载完成后，文本会突然<strong>切换</strong>成新的字体，导致页面内容“闪烁”一下，并可能引发布局偏移（CLS）。</li><li><strong>原因</strong>：这是一种“先内容后样式”的策略。</li></ul><p>我们的优化目标就是：<strong>尽可能快地加载字体，并有效控制 FOIT 和 FOUT，找到性能和视觉体验的最佳平衡点。</strong></p><h2 id="_2-核心优化策略-font-display" tabindex="-1">2. 核心优化策略：<code>font-display</code> <a class="header-anchor" href="#_2-核心优化策略-font-display" aria-label="Permalink to &quot;2. 核心优化策略：\`font-display\`&quot;">​</a></h2><p><code>font-display</code> 是一个 <code>@font-face</code> 规则中的 CSS 描述符，它允许我们控制字体在下载期间的显示行为，是字体优化的<strong>核心属性</strong>。</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@font-face</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyFont&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/my-font.woff2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;woff2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">swap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 核心在这里 */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><code>font-display</code> 属性有五个值，对应不同的策略：</p><table tabindex="0"><thead><tr><th>值</th><th><strong>阻塞期 (Block)</strong></th><th><strong>交换期 (Swap)</strong></th><th><strong>失败期 (Failure)</strong></th><th><strong>总结与建议</strong></th></tr></thead><tbody><tr><td><code>auto</code></td><td>由浏览器决定 (通常类似 <code>block</code>)</td><td>-</td><td>-</td><td>不推荐，行为不确定</td></tr><tr><td><strong><code>block</code></strong></td><td><strong>较短</strong> (约 3s)，文本不可见 (FOIT)</td><td><strong>无限长</strong>，下载完后立即交换 (FOUT)</td><td>使用备用字体</td><td>适用于字体是核心体验、不可替代的场景（如 Logo 字体）</td></tr><tr><td><strong><code>swap</code></strong></td><td><strong>极短</strong> (约 100ms)，几乎立即显示备用字体</td><td><strong>无限长</strong>，下载完后立即交换 (FOUT)</td><td>使用备用字体</td><td><strong>推荐！</strong> 优先保证内容可读性，能最快地显示文本</td></tr><tr><td><strong><code>fallback</code></strong></td><td><strong>极短</strong> (约 100ms)，几乎立即显示备用字体</td><td><strong>较短</strong> (约 3s)，在此期间下载完才交换，否则不交换</td><td>使用备用字体</td><td>在弱网环境下，宁愿放弃自定义字体也要保证视觉稳定性</td></tr><tr><td><strong><code>optional</code></strong></td><td><strong>极短</strong> (约 100ms)，几乎立即显示备用字体</td><td><strong>不交换</strong>。浏览器会继续下载，但只在下次导航时使用</td><td>使用备用字体</td><td>字体为非必需品，内容可读性远比自定义字体重要</td></tr></tbody></table><p><strong>最佳实践</strong>：对于绝大多数 Web 内容，<code>font-display: swap;</code> 是最实用、最平衡的选择。它能最快地让用户看到内容，有效优化 FCP 和 LCP。</p><h2 id="_3-加快字体加载速度" tabindex="-1">3. 加快字体加载速度 <a class="header-anchor" href="#_3-加快字体加载速度" aria-label="Permalink to &quot;3. 加快字体加载速度&quot;">​</a></h2><h3 id="a-预加载关键字体-preload" tabindex="-1">a. 预加载关键字体 (Preload) <a class="header-anchor" href="#a-预加载关键字体-preload" aria-label="Permalink to &quot;a. 预加载关键字体 (Preload)&quot;">​</a></h3><p>如果一个字体文件对于首屏渲染至关重要（例如用于标题），我们可以使用 <code>&lt;link rel=&quot;preload&quot;&gt;</code> 来告知浏览器<strong>以高优先级立即下载</strong>它，从而缩短字体的阻塞时间。</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/my-font.woff2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;font&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;font/woff2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crossorigin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><code>as=&quot;font&quot;</code>: 明确告知浏览器这是一个字体文件。</li><li><code>type=&quot;font/woff2&quot;</code>: 帮助浏览器确认文件类型。</li><li><code>crossorigin</code>: 必须添加，因为字体请求通常是跨域的。</li></ul><h3 id="b-使用现代字体格式-woff2" tabindex="-1">b. 使用现代字体格式：WOFF2 <a class="header-anchor" href="#b-使用现代字体格式-woff2" aria-label="Permalink to &quot;b. 使用现代字体格式：WOFF2&quot;">​</a></h3><p>WOFF2 (Web Open Font Format 2) 是目前压缩率最高、性能最好的 Web 字体格式，其体积通常比 WOFF 或 TTF 小 30% 左右。应始终优先使用 WOFF2。</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@font-face</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyFont&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* 优先加载 WOFF2 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-font.woff2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;woff2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       /* 为旧浏览器提供 WOFF 作为回退 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-font.woff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;woff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">swap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="c-字体子集化-subsetting" tabindex="-1">c. 字体子集化 (Subsetting) <a class="header-anchor" href="#c-字体子集化-subsetting" aria-label="Permalink to &quot;c. 字体子集化 (Subsetting)&quot;">​</a></h3><p>一个完整的字体文件可能包含数千个字符，但你的网站可能只需要其中的一小部分（例如，基本的拉丁字母、数字和标点符号）。<strong>字体子集化</strong>就是从字体文件中<strong>剔除那些你用不到的字符</strong>，从而生成一个体积更小的定制化字体文件。</p><p><strong>这是字体优化中最有效、最重要的手段之一，可以极大地减小字体文件的体积。</strong></p><p><strong>如何实现</strong>：</p><ul><li><strong>Google Fonts</strong>: 如果你使用 Google Fonts, 它会自动进行子集化。你可以在请求 URL 中通过 <code>text</code> 参数指定你需要的字符，例如 <code>&amp;text=HelloWorld</code>。</li><li><strong>本地工具</strong>: 可以使用 <code>font-spider</code> (字蛛，适合中文字体) 或 <code>pyftsubset</code> (FontTools 的一部分) 等命令行工具，在项目构建流程中自动完成子集化。</li></ul><h3 id="d-平滑化-fout-减少-cls" tabindex="-1">d. 平滑化 FOUT，减少 CLS <a class="header-anchor" href="#d-平滑化-fout-减少-cls" aria-label="Permalink to &quot;d. 平滑化 FOUT，减少 CLS&quot;">​</a></h3><p><code>font-display: swap</code> 解决了内容可见性的问题，但它带来的 FOUT（字体切换时的“闪烁”）在视觉上仍然比较突兀，甚至可能因为字体度量（metrics）不同而引发布局偏移（CLS）。</p><p>我们可以通过 CSS 的 <code>@font-face</code> 描述符，<strong>让备用字体尽可能地模拟最终 Web 字体的“骨架”</strong>，从而让字体切换的过程更加平滑。</p><p><strong>核心思想</strong>：调整备用字体的 <code>size-adjust</code>, <code>ascent-override</code>, <code>descent-override</code>, <code>line-gap-override</code> 属性，使其在字号、行高等关键度量上与目标 Web 字体对齐。</p><p><strong>如何实现</strong>：</p><ol><li>选择一个广泛可用的本地字体作为备用（如 <code>Arial</code>）。</li><li>使用工具（如 <a href="https://meowni.ca/font-style-matcher/" target="_blank" rel="noreferrer">Malte Ubl&#39;s font style matcher tool</a>）计算出 Web 字体和备用字体之间的度量差异，并生成调整代码。</li></ol><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 目标 Web 字体 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@font-face</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Inter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/inter.woff2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;woff2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-display</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">swap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 这是一个“伪造”的本地字体，用于调整其度量 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@font-face</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Inter-fallback&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Arial&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 使用本地的 Arial 作为基础 */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* 以下为工具生成的调整值 */</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  size-adjust</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">97.38</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  ascent-override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">92.56</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  descent-override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24.16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  line-gap-override</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.00</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* 在 body 中使用时，将这个调整后的备用字体放在 Web 字体和通用字体族之间 */</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  font-family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Inter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Inter-fallback&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sans-serif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>效果</strong>：通过这种方式，即使用户在 FOUT 期间看到的是备用字体，其占据的空间也和最终的 Web 字体几乎完全一样，这极大地<strong>减少了 CLS</strong>，并让字体切换的视觉效果<strong>从“闪烁”变为平滑的“淡入”</strong>。</p><h2 id="_4-总结-字体优化最佳实践清单" tabindex="-1">4. 总结：字体优化最佳实践清单 <a class="header-anchor" href="#_4-总结-字体优化最佳实践清单" aria-label="Permalink to &quot;4. 总结：字体优化最佳实践清单&quot;">​</a></h2><ol><li><strong>格式优先</strong>：始终优先使用 <strong>WOFF2</strong> 格式，并提供 WOFF/TTF 作为回退。</li><li><strong>控制显示</strong>：为所有 <code>@font-face</code> 规则添加 <code>font-display: swap;</code>，保证文本内容能最快地被用户看到。</li><li><strong>预加载关键字体</strong>：对首屏渲染必需的字体文件，使用 <code>&lt;link rel=&quot;preload&quot;&gt;</code> 进行预加载。</li><li><strong>字体子集化 (最重要)</strong>：根据你的实际用字需求，剔除字体文件中不必要的字符，这是减小体积最有效的手段。</li><li><strong>字体托管</strong>：将字体文件与你的其他静态资源一样，托管在 <strong>CDN</strong> 上以加速分发。</li><li><strong>本地存储</strong>：可以考虑将字体文件缓存在 <code>LocalStorage</code> 或 <code>IndexedDB</code> 中，但这是一种更激进的策略，适用于对性能要求极致的 PWA 等场景。</li></ol>`,38)])])}const g=i(l,[["render",h]]);export{E as __pageData,g as default};
